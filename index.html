<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>My Finance — Mobile</title>

  <link rel="stylesheet" href="style.css">

  <!-- Manifest (uses embedded data-URI icons) -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FDE8FF">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- Register service worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(err => console.warn('SW failed', err));
    }
  </script>
</head>
<body>
  <div id="app" class="app light">
    <header class="topbar">
      <div class="title">My Finance</div>
      <div class="top-actions">
        <button id="exportBtn" class="icon-btn" title="Export CSV">⤒</button>
        <button id="importBtn" class="icon-btn" title="Import CSV">⤓</button>
      </div>
    </header>

    <!-- HOME -->
    <main class="screen" id="screen-home">
      <section class="card greeting">
        <div>
          <h2 id="greeting">Welcome</h2>
          <p id="greeting-sub">Your pastel finance companion</p>
        </div>
        <div class="quick-actions">
          <button id="quickAddEarning" class="pill">+ Income</button>
          <button id="quickAddExpense" class="pill ghost">+ Expense</button>
        </div>
      </section>

      <section class="card summary" aria-live="polite">
        <div class="summary-row">
          <div class="summary-item">
            <div class="label">Earnings</div>
            <div id="summary-earn" class="value plus">$0.00</div>
          </div>
          <div class="summary-item">
            <div class="label">Expenses</div>
            <div id="summary-exp" class="value minus">$0.00</div>
          </div>
          <div class="summary-item">
            <div class="label">Net</div>
            <div id="summary-net" class="value net">$0.00</div>
          </div>
        </div>
      </section>

      <section class="card charts">
        <div class="chart-half">
          <h3>Totals</h3>
          <canvas id="barChart" aria-label="Totals bar chart"></canvas>
        </div>
        <div class="chart-half">
          <h3>Expenses by Category</h3>
          <canvas id="pieChart" aria-label="Expenses pie chart"></canvas>
        </div>
      </section>
    </main>

    <!-- EARNINGS -->
    <main class="screen hidden" id="screen-earnings">
      <section class="card">
        <h3>Earnings</h3>
        <div id="earn-list" class="list"></div>
      </section>
    </main>

    <!-- EXPENSES -->
    <main class="screen hidden" id="screen-expenses">
      <section class="card">
        <h3>Expenses</h3>
        <div id="exp-list" class="list"></div>
      </section>
    </main>

    <!-- STATS -->
    <main class="screen hidden" id="screen-stats">
      <section class="card">
        <h3>Stats</h3>
        <div id="stats-list" class="list"></div>
      </section>
    </main>

    <!-- SETTINGS -->
    <main class="screen hidden" id="screen-settings">
      <section class="card">
        <h3>Settings</h3>

        <div class="setting-row">
          <div>Dark mode</div>
          <label class="switch">
            <input id="darkToggle" type="checkbox">
            <span class="slider"></span>
          </label>
        </div>

        <div class="setting-row">
          <div>Clear all data</div>
          <button id="clearAllBtn" class="danger">Clear</button>
        </div>

        <div class="setting-row">
          <div>CSV Import</div>
          <input id="csvInput" type="file" accept=".csv" />
        </div>

        <div class="setting-row">
          <div>App Version</div>
          <div class="muted">1.0 — Pastel</div>
        </div>

      </section>
    </main>

    <!-- Modal -->
    <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
      <form id="itemForm" class="modal-card" onsubmit="return false;">
        <div class="modal-head">
          <h3 id="modalTitle">Add Item</h3>
          <button id="modalClose" type="button" class="icon-btn">✕</button>
        </div>

        <div class="form-row">
          <label>Type</label>
          <div class="segmented">
            <button type="button" class="seg-btn active" data-type="earning">Earning</button>
            <button type="button" class="seg-btn" data-type="expense">Expense</button>
          </div>
        </div>

        <div class="form-row">
          <label for="name">Name</label>
          <input id="name" required placeholder="Salary, Groceries, etc.">
        </div>

        <div class="form-row">
          <label for="category">Category</label>
          <select id="category"></select>
        </div>

        <div class="form-row two">
          <div>
            <label for="amount">Amount ($)</label>
            <input id="amount" type="number" step="0.01" required>
          </div>
          <div>
            <label for="frequency">Frequency</label>
            <select id="frequency"></select>
          </div>
        </div>

        <div class="form-row two">
          <div>
            <label for="date">Date</label>
            <input id="date" type="date">
          </div>
          <div>
            <label for="note">Note</label>
            <input id="note" placeholder="Optional">
          </div>
        </div>

        <div class="form-row actions">
          <button id="saveItem" class="btn">Save</button>
          <button id="cancelItem" class="btn ghost">Cancel</button>
        </div>

        <input id="editIndex" type="hidden" value="-1">
      </form>
    </div>

    <!-- Bottom nav -->
    <nav class="bottom-nav" role="navigation" aria-label="Main">
      <button class="nav-btn active" data-screen="screen-home">Home</button>
      <button class="nav-btn" data-screen="screen-earnings">Earnings</button>
      <button class="nav-btn" data-screen="screen-expenses">Expenses</button>
      <button class="nav-btn" data-screen="screen-stats">Stats</button>
      <button class="nav-btn" data-screen="screen-settings">Settings</button>
    </nav>
  </div>

  <script src="script.js"></script>
</body>
</html>
